app-id: org.gforth.gforth
runtime: org.freedesktop.Platform
platform-extensions:
  - org.freedesktop.Platform.GL.default
runtime-version: "21.08"
branch: "21.08"
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.stb
  - org.freedesktop.Sdk.Extension.texlive
command: gforth
append-path:
  - /usr/lib/sdk/texlive/bin
  - /usr/lib/sdk/texlive/bin/x86_64-linux

modules:
  - name: gforth
    buildsystem: autotools
    config-opts:
      - "CPPFLAGS=-I/usr/lib/sdk/stb/include"
      - "ac_cv_header_linux_v4l2_common_h=no"
      - "ac_cv_header_vulkan_vulkan_h=no"
      - "ac_cv_header_glib_object_h=no"
      - "ac_cv_header_libavcodec_avcodec_h=no"
      - "--disable-lib"
      - "--with-lispdir=/app/share/emacs/site-lisp"
      - "--with-elispstartdir=/app/share/emacs/site-start.d"
    no-autogen: true
    sources:
      - type: archive
        url: https://www.complang.tuwien.ac.at/forth/gforth/Snapshots/0.7.9_20220819/gforth-0.7.9_20220819.tar.xz
        sha256: 6420ff48617b42c9aa04670c780861bf9cfe0a4dae0618a5a4b1f026e2ac7f20
